<style>
  body {
    background-color: black;
    margin: 0;
    padding: 0;
    height: 100vh;
    overflow: hidden;
  }

  #warning-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: black;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    z-index: 1000;
    color: #aaa;
    font-family: Arial, sans-serif;
    font-size: 2em;
  }

  #warning-text {
    margin-bottom: 20px;
    text-align: center;
  }

  #countdown {
    font-size: 3em;
    font-weight: bold;
  }
</style>

<div id="warning-overlay">
  <div id="warning-text">EPILEPSY WARNING</div>
  <div id="countdown">3</div>
</div>

<script>
  let typedSequence = "";
  const targetSequence = "hyper";

  // Check URL query parameter on page load
  function setHyperBackground() {
    document.body.style.backgroundImage = "url(./hyperfastparrot.gif)";
  }

  function showBackground() {
    document.body.style.backgroundImage = "url(./ultrafastparrot.gif)";
    document.body.style.backgroundRepeat = "repeat";
  }

  // Countdown and show background
  function startCountdown() {
    const overlay = document.getElementById("warning-overlay");
    const countdownEl = document.getElementById("countdown");
    let count = 3;

    const interval = setInterval(() => {
      count--;
      if (count > 0) {
        countdownEl.textContent = count;
      } else {
        countdownEl.textContent = "0";
        clearInterval(interval);
        setTimeout(() => {
          overlay.style.display = "none";
          showBackground();

          // Check if URL ends with ?hyper after showing background
          if (window.location.search === "?hyper") {
            setHyperBackground();
          }
        }, 500);
      }
    }, 1000);
  }

  // Wait for DOM to be ready
  document.addEventListener("DOMContentLoaded", () => {
    startCountdown();
  });

  document.addEventListener("keydown", (e) => {
    // Add the typed character to the sequence
    typedSequence += e.key.toLowerCase();

    // Keep only the last N characters (where N is the length of target sequence)
    if (typedSequence.length > targetSequence.length) {
      typedSequence = typedSequence.slice(-targetSequence.length);
    }

    // Check if the sequence matches "hyper"
    if (typedSequence === targetSequence) {
      setHyperBackground();
      typedSequence = ""; // Reset sequence
    }
  });
</script>
